# YummyVerse Database Server

## 概要
このリポジトリはYummyVerse用のデータベースサーバのコードです.

## 注意
このサーバにおける`user_id`はすべて, pythonの`uuid`ライブラリで生成されるUUID形式の文字列, もしくはUUIDクラスインスタンスであることを前提としています. APIを利用する際は, **文字列形式のUUIDを使用してください.**

## API
このサーバは以下のAPIエンドポイントを提供します.
- `/`: サーバのルートエンドポイント
    - メソッド: GET
    - 説明: ルートエンドポイントです. 特に機能はありません.

- `/{user_id}/status`: ユーザーステータスの取得
    - メソッド: POST
    - 説明: 指定されたユーザーのデータステータスを取得します. すべてのデータが準備できている場合は`true`を返します.

- `/create/user`: ユーザーの作成
    - メソッド: POST
    - 説明: 指定されたIDを持つ, 新しいユーザーを作成します.

- `/save/model`: モデルデータの保存
    - メソッド: POST
    - 説明: 指定されたモデルデータをユーザに紐づけて保存します.

- `/save/audio`: 音声データの保存
    - メソッド: POST
    - 説明: 指定された音声データをユーザに紐づけて保存します.

- `/{user_id}/model`: モデルデータの取得
    - メソッド: POST
    - 説明: 指定されたユーザーのモデルデータを取得します.

- `/{user_id}/audio`: 音声データの取得
    - メソッド: POST
    - 説明: 指定されたユーザーの音声データを取得します

# 使い方
## サーバの起動
以下の手順でサーバを起動できます.

1. `uv sync`コマンドを実行して依存関係をインストールします.
2. `uv run src/entry.py`コマンドを実行してサーバを起動します.
3. サーバはデフォルトで`http://0.0.0.0:8000`で起動します.

## APIの利用
APIを利用するには, HTTPクライアントを使用して各エンドポイントにリクエストを送信してください. FastAPIを利用しているので, /docsエンドポイントで自動生成されたAPIドキュメントも利用できます.

APIを利用する場合は以下の手順に従ってください. 
1. `create/user`エンドポイントで新しいユーザーを作成
2. `save/model`および`save/audio`エンドポイントでモデルデータと音声データを保存
3. `{user_id}/status`エンドポイントでデータの準備状況を確認
4. `{user_id}/model`および`{user_id}/audio`エンドポイントで保存されたデータ
